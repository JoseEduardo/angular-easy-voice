!function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="/",n(0)}([function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=t(1),a=o(i);angular.module("angular-easy-voice",[]).service("EasyVoice",a.default)},function(e,n){"use strict";function t(e,n){var t=this;e.AudioContext=e.AudioContext||e.webkitAudioContext;var i={oninit:void 0,onstart:void 0,onresult:void 0},a=void 0,r=new AudioContext,s=void 0,c=void 0,l=void 0,u=void 0,d=void 0,f=void 0,g=void 0,v=void 0,p=void 0,y=!1,h=!0,m=void 0,w=void 0,b=void 0,x=void 0,S=[],k=[],A=new DOMParser,C=document.getElementsByTagName("body")[0],F=document.head||document.getElementsByTagName("head")[0],q=void 0,M='\n        <div id="angular-easy-voice-container">\n          <div style="margin-top: 10%;">\n          <button class="" id="angular-easy-voice-microphone">\n              <svg width="64" version="1.1" xmlns="http://www.w3.org/2000/svg" height="64" viewBox="0 0 64 64" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 64 64">\n                <g>\n                  <g fill="red">\n                    <path d="m43.18,37.155v-25.458c0-6.236-5.074-11.311-11.311-11.311-6.237,0-11.312,5.074-11.312,11.311v25.458c0,6.237 5.074,11.312 11.312,11.312 6.236,0 11.311-5.074 11.311-11.312zm-18.598,0v-25.458c0-4.018 3.27-7.287 7.287-7.287 4.016,0 7.285,3.27 7.285,7.287v25.458c0,4.018-3.27,7.286-7.285,7.286-4.017,0-7.287-3.268-7.287-7.286z"/>\n                    <path d="m31.869,64c1.111,0 2.011-0.9 2.011-2.012v-6.468c11.677-1.024 20.87-10.842 20.87-22.779 0-1.112-0.9-2.014-2.013-2.014s-2.013,0.901-2.013,2.014c0,10.397-8.457,18.855-18.855,18.855-10.399,0-18.857-8.458-18.857-18.855 0-1.112-0.9-2.014-2.012-2.014-1.113,0-2.014,0.901-2.014,2.014 0,11.938 9.192,21.755 20.87,22.779v6.469c-3.55271e-15,1.111 0.901,2.011 2.013,2.011z"/>\n                  </g>\n                </g>\n              </svg>\n          </div>\n          <div style="margin-top: 2%;">\n            <label id="angular-easy-voice-text"></label>\n          </div>\n        </div>\n    ',E="\n\n          #angular-easy-voice-container{\n              position: absolute;\n              left: 0;\n              top: 0;\n              width: 100%;\n              height: 100%;\n              background: #fff;\n              text-align: center;\n              z-index: 99999;\n          }\n\n          #angular-easy-voice-microphone{\n              background: transparent;\n              border: 1px solid #ccc;\n              border-radius: 62%;\n              padding: 30px;\n          }\n\n          #angular-easy-voice-text{\n              color: #777;\n              font-weight: normal;\n              font-family: arial,sans-serif;\n              line-height: 1.2;\n              transition: opacity .1s ease-in,margin-left .5s ease-in,top 0s linear 0.218s;\n              font-size: 32px;\n          }\n\n    ";if(navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),"SpeechSynthesisUtterance"in e){g=new SpeechSynthesisUtterance;var T=window.speechSynthesis.getVoices();g.lang="en-US",g.localService=!0,g.voice=T[5]}return"webkitSpeechRecognition"in e&&!function(){a=new webkitSpeechRecognition,q=A.parseFromString(M,"text/html"),v=q.getElementById("angular-easy-voice-container"),p=v.querySelector("#angular-easy-voice-microphone");var e=document.createElement("style"),o=v.querySelector("#angular-easy-voice-text");e.type="text/css",e.styleSheet?e.styleSheet.cssText=E:e.appendChild(document.createTextNode(E)),F.appendChild(e),a.continuous=!1,a.interimResults=!0,a.lang="en-US",a.onresult=function(e){void 0!=x&&(n.cancel(x),x=void 0),x=n(function(){y=!1,null!=C.querySelector("#angular-easy-voice-container")&&C.removeChild(v)},5e3);for(var t=e.resultIndex;t<e.results.length;++t){var a=e.results[t][0].transcript;e.results[t][0].confidence<.9&&e.results[t].isFinal&&a.split(" ").forEach(function(e){var n=[];S.forEach(function(t){n.push({word:t,distance:i.similarText(t,e)})}),n=n.sort(function(e,n){return n.distance-e.distance}),n.length>0&&n[0].distance>=3&&(a=a.replace(new RegExp(e,"g"),n[0].word))}),o.innerHTML=a,b&&"function"==typeof b&&e.results[t].isFinal&&y&&b(a),w.debug&&e.results[t].isFinal&&console.info("Debug: "+a),m&&m.trim()==a.trim()&&!y&&e.results[t].isFinal&&(y=!0,null!=C.querySelector("#angular-easy-voice-container")&&C.removeChild(v),v.onclick=function(){y=!1,C.removeChild(v)},o.innerHTML="Fale agora",i.onstart&&"function"==typeof i.onstart&&i.onstart(),C.appendChild(v)),y&&e.results[t].isFinal&&k.forEach(function(e){(e.key&&e.callback&&e.watchStart&&a.startsWith(e.key)||e.key&&e.callback&&a==e.key)&&(e.close&&(y=!1,null!=C.querySelector("#angular-easy-voice-container")&&C.removeChild(v)),e.callback(a))}),i.onresult&&"function"==typeof i.onresult&&y&&e.results[t].isFinal&&a!=m&&i.onresult(a)}},a.onend=function(){h&&t.initRecognition()}}(),i.getCommands=function(){return k},i.initWatch=function(n,o,i){if(!("webkitSpeechRecognition"in e))throw"Sorry, this feature is only for Google Chrome.";if(!n)throw"Please enter the key phrase.";if(m)throw"Sorry, start only once.";w=o,m=n,b=i,t.initRecognition()},i.reproduce=function(e,n){g.lang=n||(w&&w.lang?w.lang:"en-US"),g.text=e,speechSynthesis.speak(g)},i.stopWatch=function(){if(!("webkitSpeechRecognition"in e))throw"Sorry, this feature is only for Google Chrome.";void 0!=a&&(w=void 0,m=void 0,h=!1,y=!1,a.stop()),void 0!=d&&(d.getAudioTracks().forEach(function(e){e.stop()}),d.getTracks().forEach(function(e){e.stop()}),d.stop&&d.stop()),null!=f&&e.cancelAnimationFrame(f),d=void 0},i.addWord=function(e){if(!e||"string"!=typeof e&&"object"!=("undefined"==typeof e?"undefined":o(e)))throw"Please, check your word.";"string"==typeof e&&S.push(e),"object"==("undefined"==typeof e?"undefined":o(e))&&(S=S.concat(e))},i.addCommand=function(e,n,t,o){if(k.filter(function(n){return n.key==e}).length>0)throw"A command with this key already exists";if(!e||"string"!=typeof e||!n||"function"!=typeof n)throw"Please enter a phrase and one function.";void 0!=t&&"boolean"==typeof t||(t=!0),void 0!=o&&"boolean"==typeof o||(o=!1),k.push({key:e,callback:n,close:t,watchStart:o})},i.addCommandStartingWith=function(e,n,t){i.addCommand(e,n,t,!0)},this.updateAnalysers=function(){if(y){var n=new Uint8Array(u.frequencyBinCount);u.getByteFrequencyData(n);for(var o=u.frequencyBinCount/10,i=0;i<10;++i){for(var a=0,r=Math.floor(i*o),s=0;s<o;s++)a+=n[r+s];a/=o,4==i&&(p.style.boxShadow="0px 0px 13px "+Math.round(a-5)+"px #ddd")}}f=e.requestAnimationFrame(t.updateAnalysers)},this.stream=function(e){d=e,s=r.createGain(),c=r.createMediaStreamSource(e),l=c,l.connect(s),u=r.createAnalyser(),u.fftSize=2048,s.connect(u),t.updateAnalysers()},this.initRecognition=function(){w&&angular.extend(a,w),h=!0,void 0==d&&navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},t.stream,function(e){throw"Please, check your microphone."}),a.start(),i.oninit&&"function"==typeof i.oninit&&i.oninit()},i.similarText=function(e,n,t){if(null===e||null===n||"undefined"==typeof e||"undefined"==typeof n)return 0;e+="",n+="";var o,a,r,s,c=0,l=0,u=0,d=e.length,f=n.length;for(o=0;o<d;o++)for(a=0;a<f;a++){for(r=0;o+r<d&&a+r<f&&e.charAt(o+r)===n.charAt(a+r);r++);r>u&&(u=r,c=o,l=a)}return s=u,s&&(c&&l&&(s+=i.similarText(e.substr(0,c),n.substr(0,l))),c+u<d&&l+u<f&&(s+=i.similarText(e.substr(c+u,d-c-u),n.substr(l+u,f-l-u)))),t?200*s/(d+f):s},i}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.default=t,t.$inject=["$window","$timeout"]}]);